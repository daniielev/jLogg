/*!
 *  jLogg - v1.0.0 (beta)
 *  A simple jQuery Plugin that allow you to login into your web app using the Facebook Javascript SDK.
 *  https://my.alojamientotico.com/devcenfo/jlogg/
 *  Please, send us your feedback on https://github.com/daniielev/jLogg/issues
 *
 *  by Daniel Mu√±oz
 *  munnozdaniel@gmail.com
 *  Under MIT License
 *  This file was generated on: Thursday, April 23rd, 2015, 1:11:18 AM
 */
!function(a,b,c){"use strict";function d(b,c){this.element=b,this.settings=a.extend({},h,c),this._defaults=h,this._options=c,this._name=g,f=this,this.init()}function e(a){"connected"===a.status?localStorage.getItem("jLoggSessionToken")||f.success():"not_authorized"===a.status?console.error("You are not logged into the app, please login to continue!"):"unknown"===a.status&&f.settings.defaultButton&&f.settings.onLogout()}var f,g="jLogg",h={appId:"",defaultButton:!1,button:{size:"medium"},permissions:"public_profile, email",onLogin:function(){},onLogout:function(){}};a.extend(d.prototype,{init:function(){if(this.settings.defaultButton)a(this.element).find("[data-action='facebook-login']")[0]&&a(this.element).find("[data-action='facebook-login']")[0].remove(),a(this.element).find("[data-action='facebook-logout']")[0]&&a(this.element).find("[data-action='facebook-logout']")[0].remove();else{var b=a(this.element).find("[data-action='facebook-login']")[0],c=a(this.element).find("[data-action='facebook-logout']")[0];a(b).on("click",f.login),a(c).on("click",f.logout)}this.setFacebookSDK()},setFacebookSDK:function(){b.fbAsyncInit=function(){if(FB.init({appId:f.settings.appId,xfbml:!0,version:"v2.3"}),f.settings.defaultButton){b.checkLoginState=function(){FB.getLoginStatus(function(a){e(a)})};var c=a(f.element).find("[data-contains='facebook-buttons']")[0],d=a("<div class='fb-login-button' data-auto-logout-link='true' data-size='"+f.settings.button.size+"' data-scope='"+f.settings.permissions+"' onlogin='checkLoginState()'></div>");a(c).append(d)}},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(c,"script","facebook-jssdk")},login:function(a){a=event||b.event,a.preventDefault(),FB.login(function(a){"connected"===a.status&&(localStorage.removeItem("jLoggSessionToken"),localStorage.setItem("jLoggSessionToken",a.authResponse.accessToken),f.success(a))},{scope:f.settings.permissions}),FB.getLoginStatus(function(a){e(a)})},logout:function(a){a=event||b.event,a.preventDefault(),FB.logout(function(){localStorage.removeItem("jLoggSessionToken"),f.settings.onLogout()})},success:function(){FB.api("/me",function(a){f.settings.onLogin(a)})}}),a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new d(this,b))})}}(jQuery,window,document);